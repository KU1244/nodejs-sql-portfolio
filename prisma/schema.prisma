// prisma/schema.prisma

generator client {
  provider = "prisma-client-js" // Generate Prisma Client for TypeScript/JavaScript
}

datasource db {
  provider = "postgresql"       // Using PostgreSQL as the database
  url      = env("DATABASE_URL") // Connection string loaded from .env.local
}

model User {
  id           Int      @id @default(autoincrement()) // Primary key, auto increment
  name         String?                                 // Optional user name
  email        String   @unique                        // Unique email address
  ownerId      Int?                                    // Optional reference to owner (multi-tenant apps etc.)
  passwordHash String?                                 // Hashed password (using bcrypt)
  role         Role     @default(USER)                 // User role (USER by default, can be ADMIN)
  createdAt    DateTime @default(now())                // Creation timestamp
  updatedAt    DateTime @updatedAt                     // Last updated timestamp
}
model CheckoutSession {
  id              String   @id @default(cuid())
  userId          String
  idemKey         String   @unique         // Idempotency-Key generated by server
  stripeSessionId String?  @unique         // Prevent duplicate records if already created
  createdAt       DateTime @default(now())

  @@index([userId])
}

// Enum for user roles
enum Role {
  USER   // Standard user
  ADMIN  // Administrator
}
